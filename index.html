<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãã†ã¾ãã‚“ã¨ã€‡ã€‡è¨ºæ–­</title>
  <style>
    body {
      font-family: "Yu Gothic", sans-serif;
      text-align: center;
      background: #fff0f5;
      padding: 40px;
      overflow: hidden;
    }

    h1 {
      color: #ff4081;
      margin-bottom: 20px;
      position: relative;
      z-index: 2;
    }

    .input-area {
      position: relative;
      display: inline-block;
      margin-bottom: 20px;
    }

    input {
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      z-index: 2;
      position: relative;
    }

    button {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      background: #ff80ab;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
      z-index: 2;
      position: relative;
      margin-top: 10px;
    }

    button:hover {
      background: #ff4081;
    }

    #result {
      font-size: 28px;
      margin-top: 40px;
      margin-bottom: 15px;
      z-index: 2;
      position: relative;
      opacity: 0;
    }

    #fantasy {
      font-size: 20px;
      white-space: pre-line;
      line-height: 1.8;
      max-width: 600px;
      margin: 0 auto;
      z-index: 2;
      position: relative;
      opacity: 0;
    }

    /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .fade-in {
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* é£¾ã‚Šã®æ˜Ÿãƒ»ã²ã¾ã‚ã‚Š */
    .floating {
      position: absolute;
      animation: floatAround 6s infinite ease-in-out alternate;
      pointer-events: none;
      font-size: 24px;
      opacity: 0.8;
    }

    @keyframes floatAround {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-20px) rotate(360deg); }
    }

    /* ãƒãƒ¼ãƒˆ */
    .heart {
      position: absolute;
      font-size: 24px;
      opacity: 0.7;
      animation: floatUp linear forwards;
      pointer-events: none;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 0.8;
      }
      100% {
        transform: translateY(-120vh) scale(1.5);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <h1>ãã†ã¾ãã‚“ã¨ã€‡ã€‡è¨ºæ–­</h1>

  <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ï¼ˆæ˜Ÿã¨ã²ã¾ã‚ã‚Šä»˜ãï¼‰ -->
  <div class="input-area">
    <input type="text" id="username" placeholder="åå‰ã‚’å…¥åŠ›ã—ã¦ã­">
    <div class="floating" style="top:-30px; left:-40px;">â­</div>
    <div class="floating" style="top:-20px; right:-40px;">ğŸŒ»</div>
    <div class="floating" style="bottom:-30px; left:-30px;">â­</div>
    <div class="floating" style="bottom:-20px; right:-30px;">ğŸŒ»</div>
  </div>
  <br>
  <button onclick="diagnose()">è¨ºæ–­ã™ã‚‹ï¼</button>

  <div id="result-area">
    <h2 id="result"></h2>
    <p id="fantasy"></p>
    <button id="retry" style="display:none;" onclick="retry()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
  </div>

  <script>
    const results = [
      { title: "ãã†ã¾ãã‚“ã¨ã‚²ãƒ¼ãƒ ã™ã‚‹ï¼", text: "å‹è² ã«è² ã‘ã¦æ‹—ã­ã¦ã„ãŸã‚‰ã€ãã†ã¾ãã‚“ãŒé ­ã‚’ã½ã‚“ã£ã¨æ’«ã§ã¦ããŸã€‚\nã€æ¬¡ã¯æœ¬æ°—å‡ºã—ã¦ã„ã„ï¼Ÿã€ã£ã¦æŒ‘ç™ºã™ã‚‹ã¿ãŸã„ã«ç¬‘ã†é¡”ãŒè¿‘ã„ã€‚\nè¦–ç·šã‚’é€¸ã‚‰ã—ãŸã®ã«ã€é¼“å‹•ã®é€Ÿã•ã¾ã§ã¯éš ã›ãªã‹ã£ãŸã€‚", type: "dokidoki" },
      { title: "ãã†ã¾ãã‚“ã¨æ˜ ç”»ã‚’è¦‹ã‚‹ï¼", text: "æš—ã„é¤¨å†…ã§ã“ã£ãã‚Šæ¨ªé¡”ã‚’ç›—ã¿è¦‹ãŸã€‚\nã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®å…‰ã«ç…§ã‚‰ã•ã‚Œã¦ã€è¦–ç·šãŒä¸€ç¬ã ã‘é‡ãªã‚‹ã€‚\nã€ãªã«ï¼Ÿã€ã¨å›ã‹ã‚Œã¦ã€å¿ƒè‡“ãŒå‹æ‰‹ã«è·³ã­ä¸ŠãŒã£ãŸã€‚", type: "seishun" },
      { title: "ãã†ã¾ãã‚“ã¨æ”¾èª²å¾Œã‚«ãƒ•ã‚§ã«è¡Œãï¼", text: "å‘ã‹ã„åˆã£ã¦åº§ã‚‹ã¨ã€æœºè¶Šã—ã«æŒ‡å…ˆãŒè§¦ã‚ŒãŸã€‚\nã€ã‚¢ã‚¤ã‚¹æº¶ã‘ã‚‹ãã€ã¨ç¬‘ã†å½¼ã®å£°ãŒç”˜ã™ãã¦ã€‚\nã‚«ãƒƒãƒ—ã®ä¸­ã®æ°·ã‚ˆã‚Šã€èƒ¸ã®ä¸­ã®ç†±ãŒå‹ã£ã¦ã„ãŸã€‚", type: "dokidoki" },
      { title: "ãã†ã¾ãã‚“ã¨å¤ç¥­ã‚Šï¼", text: "æµ´è¡£å§¿ã§éš£ã«ç«‹ã¤ã¨ã€ãªã‚“ã ã‹è·é›¢ãŒè¿‘ã„ã€‚\näººæ··ã¿ã§è¿·ã‚ãªã„ã‚ˆã†ã«ã¨ã€ãã£ã¨æ‰‹ã‚’ç¹‹ãŒã‚ŒãŸã€‚\nå¤œç©ºã®èŠ±ç«ã‚ˆã‚Šã€å½¼ã®æ¨ªé¡”ã«ç›®ã‚’å¥ªã‚ã‚ŒãŸã€‚", type: "seishun" },
      { title: "ãã†ã¾ãã‚“ã¨æµ·ã«è¡Œãï¼", text: "æ³¢æ‰“ã¡éš›ã§ã¯ã—ã‚ƒãå½¼ã«æ°´ã‚’ã‹ã‘ãŸã‚‰ã€é€†è¥²ã•ã‚Œã¦å¤§ç¬‘ã„ã€‚\nã€å†·ãŸã„ã£ã¦ï¼ã€ã¨å«ã‚“ã å£°ã‚‚ã€æ½®é¢¨ã«æ··ã–ã£ã¦å¼¾ã‚€ã€‚\nãã‚‰ã‚ãæµ·ã‚ˆã‚Šå¿ƒè‡“ãŒè·³ã­ã¦ã‚‹ã®ã¯ç§˜å¯†ã€‚", type: "seishun" },
      { title: "ãã†ã¾ãã‚“ã¨å‹‰å¼·ä¼šï¼", text: "ãƒãƒ¼ãƒˆã‚’è¦—ãè¾¼ã‚“ã ã‚‰ã€è·é›¢ãŒè¿‘ã™ãã¦å¿ƒè‡“ãŒã†ã‚‹ã•ã„ã€‚\nèµ¤ãƒšãƒ³ã§è¨‚æ­£ã—ã¦ãã‚Œã‚‹æ¨ªé¡”ã«è¦‹æƒšã‚Œã¦ã—ã¾ã†ã€‚\nã€é›†ä¸­ã§ãã¦ã‚‹ï¼Ÿã€ã£ã¦ç¬‘ã‚ã‚Œã¦ã€ã¾ã™ã¾ã™é›†ä¸­ã§ããªã„ã€‚", type: "dokidoki" },
      { title: "ãã†ã¾ãã‚“ã¨æ˜¼å¯ï¼", text: "æ•™å®¤ã®éš…ã§ä¸¦ã‚“ã§å¯è»¢ã‚“ã ã€‚\nå¯æ¯ãŒã™ãè¿‘ãã«ã‚ã£ã¦ã€è§¦ã‚ŒãŸã‚‰å£Šã‚Œãã†ãªè·é›¢æ„Ÿã€‚\né™ã‹ãªåˆå¾ŒãŒã€ã‚„ã‘ã«æ„›ãŠã—ã‹ã£ãŸã€‚", type: "seishun" },
      { title: "ãã†ã¾ãã‚“ã¨è²·ã„ç‰©ï¼", text: "ãŠãã‚ã„ã®ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¦‹ã¤ã‘ã¦ã€æ€ã‚ãšé¡”ã‚’è¦‹åˆã‚ã›ãŸã€‚\nã€è²·ã†ï¼Ÿã€ã£ã¦ç¬‘ã‚ã‚Œã¦ã€å¿ƒã®ä¸­ã¾ã§è¦‹é€ã‹ã•ã‚ŒãŸã¿ãŸã„ã€‚\nå°ã•ãªè¢‹ã®ä¸­ã«ã€å¤§ããªã¨ãã‚ããŒè©°ã¾ã£ãŸã€‚", type: "dokidoki" },
      { title: "ãã†ã¾ãã‚“ã¨ã‚«ãƒ©ã‚ªã‚±ï¼", text: "ãƒã‚¤ã‚¯ã‚’æ¸¡ã•ã‚ŒãŸã‚‰ã€æ€ã‚ãšå£°ãŒè£è¿”ã£ãŸã€‚\nç¬‘ã†ãã†ã¾ãã‚“ã®æ­Œå£°ãŒã¾ã¶ã—ãã¦ã€‚\nä¸æ€è­°ã¨æ‚”ã—ããªãã¦ã€ã‚‚ã£ã¨è´ã„ã¦ã„ãŸããªã£ãŸã€‚", type: "seishun" },
      { title: "ãã†ã¾ãã‚“ã¨é›¨å®¿ã‚Šï¼", text: "çªç„¶ã®é›¨ã€è»’ä¸‹ã§è‚©ãŒè§¦ã‚Œãã†ãªè·é›¢ã«ç«‹ã¤ã€‚\nã€æ­¢ã‚€ã¾ã§ä¸€ç·’ã«ã„ã‚ˆã€ã®ä¸€è¨€ãŒã€é›¨éŸ³ã‚ˆã‚ŠéŸ¿ã„ãŸã€‚\næ¿¡ã‚ŒãŸåˆ¶æœã®åŒ‚ã„ã¾ã§ã€ã‚„ã‘ã«é®®æ˜ã«æ®‹ã£ãŸã€‚", type: "dokidoki" },
    ];

    function generateIndex(name, max) {
      const today = new Date();
      const dateStr = today.getFullYear() + "-" + (today.getMonth()+1) + "-" + today.getDate();
      const key = name + dateStr;

      let hash = 0;
      for (let i = 0; i < key.length; i++) {
        hash = (hash << 5) - hash + key.charCodeAt(i);
        hash |= 0;
      }
      return Math.abs(hash) % max;
    }

    function diagnose() {
      const name = document.getElementById("username").value.trim();
      if (!name) {
        alert("åå‰ã‚’å…¥åŠ›ã—ã¦ã­ï¼");
        return;
      }

      const index = generateIndex(name, results.length);
      const result = results[index];

      const resultEl = document.getElementById("result");
      const fantasyEl = document.getElementById("fantasy");

      resultEl.innerText = `${name}ã•ã‚“ã®ä»Šæ—¥ã®è¨ºæ–­ã¯â€¦\n${result.title}`;
      fantasyEl.innerText = result.text;

      if (result.type === "dokidoki") {
        fantasyEl.style.color = "#e91e63";
      } else {
        fantasyEl.style.color = "#3f51b5";
      }

      // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ç›´ã™
      resultEl.classList.remove("fade-in");
      fantasyEl.classList.remove("fade-in");
      void resultEl.offsetWidth; // å†é©ç”¨ç”¨
      resultEl.classList.add("fade-in");
      fantasyEl.classList.add("fade-in");

      document.getElementById("retry").style.display = "inline-block";

      // ğŸ’–è¨ºæ–­æ™‚ã«ãƒãƒ¼ãƒˆã‚’å¤§é‡ç”Ÿæˆ
      for (let i = 0; i < 20; i++) {
        setTimeout(createHeart, i * 200);
      }
    }

    function retry() {
      diagnose();
    }

    function createHeart() {
      const heart = document.createElement("div");
      heart.classList.add("heart");
      heart.innerText = "ğŸ’–";

      heart.style.left = Math.random() * 100 + "vw";
      heart.style.fontSize = (20 + Math.random() * 30) + "px";
      heart.style.animationDuration = (3 + Math.random() * 3) + "s";

      document.body.appendChild(heart);

      setTimeout(() => {
        heart.remove();
      }, 7000);
    }
  </script>
</body>
</html>
