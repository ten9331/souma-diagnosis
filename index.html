<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>„Åù„ÅÜ„Åæ„Åè„Çì„Å®„Äá„ÄáË®∫Êñ≠</title>
  <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Yu Gothic", sans-serif;
      background: #fffacd; /* ËñÑÈªÑËâ≤ */
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    h1 { color: orange; font-size: 36px; margin-bottom: 30px; }
    input {
      padding: 12px; font-size: 18px;
      border-radius: 8px; border: 1px solid #ccc;
      position: relative; z-index: 2;
    }
    button {
      padding: 12px 24px; font-size: 18px;
      border: none; border-radius: 8px;
      background: orange; color: white;
      margin-top: 20px; cursor: pointer;
      z-index: 2; position: relative;
    }
    button:hover { background: darkorange; }
    #result {
      font-size: 28px; margin-top: 40px;
      opacity: 0; transition: opacity 1s ease-in;
      color: orange;
    }
    #fantasy {
      font-size: 20px; line-height: 1.8;
      max-width: 600px;
      margin: 20px auto;
      opacity: 0; transition: opacity 1s ease-in;
    }
    #serif {
      font-family: 'Sacramento', cursive;
      font-size: 26px;
      color: #ff66a3;
      margin-top: 15px;
      opacity: 0;
      transition: opacity 1s ease-in;
    }
    .show { opacity: 1 !important; }
    .heart {
      position: absolute; color: #ff80ab;
      font-size: 24px;
      animation: floatUp 4s linear forwards;
      z-index: 1;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-300px) scale(1.5); opacity: 0; }
    }

    /* Êòü */
    .star {
      position: absolute;
      font-size: 18px;
      animation: floatStar 12s linear infinite;
      z-index: 0;
    }
    @keyframes floatStar {
      0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }

    /* „Ç∑„É£„Éú„É≥Áéâ */
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.7), rgba(255,255,255,0) 70%);
      border: 2px solid rgba(255,255,255,0.4);
      box-shadow: inset -5px -5px 15px rgba(173,216,230,0.5),
                  inset 5px 5px 15px rgba(255,182,193,0.4);
      animation: floatBubble 15s linear infinite;
      z-index: 0;
    }
    @keyframes floatBubble {
      0%   { transform: translateY(0) scale(1); opacity: 0.7; }
      50%  { opacity: 1; }
      100% { transform: translateY(-120vh) scale(1.3); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>„Åù„ÅÜ„Åæ„Åè„Çì„Å®„Äá„ÄáË®∫Êñ≠</h1>

  <input type="text" id="username" placeholder="ÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Å≠">
  <br>
  <button id="diagnoseBtn" onclick="diagnose()">Ë®∫Êñ≠„Åô„ÇãÔºÅ</button>
  <button onclick="retry()" style="display:none;">„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë®∫Êñ≠„Åô„Çã</button>

  <h2 id="result"></h2>
  <p id="fantasy"></p>
  <p id="serif"></p>

  <!-- BGM -->
  <audio id="bgm" src="bgm.mp3" loop></audio>

  <script>
    const results = [
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®„Ç≤„Éº„É†„Åô„ÇãÔºÅ", text: "‰∏ÄÁ∑í„Å´ÁîªÈù¢„ÇíË¶ã„Å§„ÇÅ„Å™„Åå„Çâ„ÄÅ„Åµ„Å®Êâã„ÅåËß¶„Çå„Å¶„Éâ„Ç≠„ÉÉ„ÄÇÁ¨ë„ÅÑÂêà„ÅÜÊôÇÈñì„Åå„ÄÅ„Åæ„Çã„ÅßÁâπÂà•„Å™ÁßòÂØÜ„Åø„Åü„ÅÑ„Å´ÊÑü„Åò„Çã„ÄÇ", serif: "üíõ„Äå„Åù„ÅÆÊâã‚Ä¶„ÇÇ„ÅÜ„Å°„Çá„Å£„Å®Ë≤∏„Åó„Å¶Ôºü„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®Ëá™Ëª¢Ëªä„ÅßÈÅ†Âá∫ÔºÅ", text: "È¢®„ÇíÂàá„Å£„Å¶Ëµ∞„Çã‰∫å‰∫∫„ÅÆÂΩ±„Åå‰∏¶„Çì„Åß‰º∏„Å≥„Çã„ÄÇÈùíÁ©∫„ÅÆ‰∏ã„Åß‰∫§„Çè„Åô‰ºöË©±„Å´„ÄÅ‰ΩïÊ∞ó„Å™„ÅÑ„ÅÆ„Å´ÂøÉ„ÅåÂºæ„ÇÄ„ÄÇ", serif: "üíõ„Äå„Å§„ÅÑ„Å¶„Åì„Çå„ÇãÔºü‰ø∫„ÄÅÂæÖ„Åü„Å™„ÅÑ„ÇàÔºü„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®„Ç´„Éï„Çß„Å´Ë°å„ÅèÔºÅ", text: "„Ç´„ÉÉ„Éó„ÇíÊåÅ„Å§Êåá„ÅåÂ∞ë„ÅóÈáç„Å™„Å£„Å¶„ÄÅË¶ñÁ∑ö„ÅåÂêà„Å£„ÅüÁû¨Èñì„Å´ËÉ∏„ÅåÈ´òÈ≥¥„Çã„ÄÇÁîò„ÅÑÈ¶ô„Çä„Çà„Çä„ÇÇÂΩº„ÅÆÁ¨ëÈ°î„Å´ÈÖî„ÅÑ„Åù„ÅÜ„ÄÇ", serif: "üíõ„Äå‚Ä¶„Åù„Çå„ÄÅ‰ø∫„Å®ÂçäÂàÜ„Åì„Åó„ÇàÔºü„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®ÊîæË™≤Âæå„ÅÆÊïôÂÆ§ÔºÅ", text: "Â§ïÈôΩ„ÅåÂ∑Æ„ÅóËæº„ÇÄÊïôÂÆ§„Åß„ÄÅ‰ªñÊÑõ„ÅÆ„Å™„ÅÑË©±„Å´Á¨ë„ÅÑÂêà„ÅÜ„ÄÇÊú∫„Å´Â∫É„Åí„Åü„Éé„Éº„Éà„ÇÇ„ÄÅ„Å™„Çì„Å†„ÅãËºù„ÅÑ„Å¶Ë¶ã„Åà„Çã„ÄÇ", serif: "üíõ„Äå„Åì„ÅÆÊôÇÈñì‚Ä¶„Åö„Å£„Å®Á∂ö„Åë„Å∞„ÅÑ„ÅÑ„ÅÆ„Å´„Å™„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®Êò†Áîª„ÇíË¶ã„ÇãÔºÅ", text: "Êöó„ÅÑÈ§®ÂÜÖ„Åß„ÄÅÈö£„Å´„ÅÑ„Çã„Åì„Å®„ÇíÊÑèË≠ò„Åó„Å¶„Åó„Åæ„ÅÜ„ÄÇÂ∞è„Åï„Å™Âãï‰Ωú„Å≤„Å®„Å§„Å≤„Å®„Å§„Å´ÂøÉËáì„ÅåË∑≥„Å≠„Çã„ÄÇ", serif: "üíõ„Äå‚Ä¶Êâã„ÄÅÁπã„ÅÑ„Åß„ÇÇ„ÅÑ„ÅÑÔºü„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®‰ΩìËÇ≤È§®„Åß„Éê„Çπ„Ç±ÔºÅ", text: "„Éú„Éº„É´„ÇíËøΩ„ÅÑ„Åã„Åë„ÇãÂßø„Åå„Åæ„Å∂„Åó„Åè„Å¶„ÄÅÊÄù„Çè„ÅöÂøúÊè¥„ÅÆÂ£∞„ÅåÂ§ß„Åç„Åè„Å™„Çã„ÄÇÁ¨ëÈ°î„ÅåÁú©„Åó„ÅÑÈùíÊò•„ÅÆ‰∏Ä„Ç≥„Éû„ÄÇ", serif: "üíõ„ÄåÊ¨°„ÅÆË©¶Âêà„ÄÅÈö£„ÅßÂøúÊè¥„Åó„Å¶„Åè„Çå„ÇãÔºü„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®Âõ≥Êõ∏È§®„ÅßÂãâÂº∑ÔºÅ", text: "Èùô„Åã„Å™Á©∫Èñì„Å´‰∫å‰∫∫„ÅÆÂëºÂê∏„Å†„Åë„ÅåÈüø„Åè„ÄÇÊú∫„ÅÆ‰∏ã„ÅßË∂≥„ÅåËß¶„Çå„Å¶„ÄÅË¶ñÁ∑ö„ÇíÈÄ∏„Çâ„Åô„ÅÆ„Å´ÂøÖÊ≠ª„Å´„Å™„Çã„ÄÇ", serif: "üíõ„ÄåÂ£∞„ÄÅÂá∫„Åô„Å™„ÇàÔºü„Éê„É¨„Å°„ÇÉ„ÅÜ„Åã„Çâ„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®ÊñáÂåñÁ•≠„ÅÆÊ∫ñÂÇôÔºÅ", text: "È£æ„Çä„Å§„Åë„Å´Â§¢‰∏≠„ÅßÊâã„ÅåÊ±ö„Çå„Å¶„ÇÇÁ¨ë„ÅÑÂêà„Åà„Çã„ÄÇË≥ë„ÇÑ„Åã„Å™ÊôÇÈñì„Åå„ÄÅÊÄù„ÅÑÂá∫„Å´Âàª„Åæ„Çå„Å¶„ÅÑ„Åè„ÄÇ", serif: "üíõ„Äå„Åù„Åì„ÄÅÂ±ä„Åã„Å™„ÅÑ„Å†„Çç„ÄÇ‰ø∫„Åå„ÇÑ„Å£„Å¶„ÇÑ„Çã„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®Â§úÈÅì„ÇíÊ≠©„ÅèÔºÅ", text: "Ë°óÁÅØ„ÅÆ‰∏ã„ÅßËÇ©„ÅåÂ∞ë„ÅóËß¶„Çå„Çã„Åü„Å≥„Å´ËÉ∏„ÅåÁÜ±„Åè„Å™„Çã„ÄÇÂ§ú„ÅÆÈùô„Åë„Åï„Åå„ÄÅÊ∞óÊåÅ„Å°„ÇíÈöõÁ´ã„Åü„Åõ„Çã„ÄÇ", serif: "üíõ„ÄåÊöó„ÅÑ„Åó„ÄÅ„ÇÇ„Å£„Å®„Åì„Å£„Å°Êù•„ÅÑ„Çà„Äç" },
      { title: "„Åù„ÅÜ„Åæ„Åè„Çì„Å®Êòº‰ºë„Åø„Å´Â±ã‰∏äÔºÅ", text: "„ÅäÂºÅÂΩì„ÇíÂàÜ„ÅëÂêà„ÅÑ„Å™„Åå„Çâ„ÄÅÁ©∫„ÇíË¶ã‰∏ä„Åí„Çã„ÄÇ‰ΩïÊ∞ó„Å™„ÅÑ‰∏ÄÁû¨„Åå„ÄÅÈùíÊò•„Çâ„Åó„ÅÑËºù„Åç„Å´Ê∫Ä„Å°„Å¶„ÅÑ„Çã„ÄÇ", serif: "üíõ„Äå„Åù„ÅÆÂîêÊèö„Åí„ÄÅ‰∏ÄÂÄã„Å°„Çá„ÅÜ„Å†„ÅÑÔºü„Äç" }
    ];

    function playBgm() {
      const bgm = document.getElementById("bgm");
      bgm.volume = 0.6;
      if (bgm.paused) {
        bgm.play().catch(err => console.log("BGMÂÜçÁîü„Ç®„É©„Éº:", err));
      }
    }

    function generateIndex(max) {
      return Math.floor(Math.random() * max); // „É©„É≥„ÉÄ„É†Ë°®Á§∫
    }

    function diagnose() {
      const name = document.getElementById("username").value.trim();
      if (!name) return alert("ÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Å≠ÔºÅ");
      const r = results[generateIndex(results.length)];

      document.getElementById("result").innerText = `${name}„Åï„Çì„ÅÆ‰ªäÊó•„ÅÆË®∫Êñ≠„ÅØ‚Ä¶ ${r.title}`;
      document.getElementById("fantasy").innerText = r.text;
      document.getElementById("serif").innerText = r.serif;

      document.getElementById("result").classList.add("show");
      document.getElementById("fantasy").classList.add("show");

      setTimeout(() => {
        document.getElementById("serif").classList.add("show");
      }, 800);

      document.querySelector("button[onclick='retry()']").style.display = "inline-block";

      for (let i=0;i<15;i++){
        const heart = document.createElement("div");
        heart.className="heart"; heart.innerText="üíñ";
        heart.style.left = Math.random()*window.innerWidth+"px";
        heart.style.top = (window.innerHeight-50)+"px";
        heart.style.fontSize = (20+Math.random()*20)+"px";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(), 4000);
      }
    }

    function retry(){
      document.getElementById("result").classList.remove("show");
      document.getElementById("fantasy").classList.remove("show");
      document.getElementById("serif").classList.remove("show");
      setTimeout(diagnose, 100);
    }

    // Êòü„Å®„Ç∑„É£„Éú„É≥Áéâ
    function createStars(num) {
      for (let i = 0; i < num; i++) {
        const star = document.createElement("div");
        star.className = "star";
        star.innerText = "‚òÖ";
        star.style.left = Math.random() * window.innerWidth + "px";
        star.style.top = window.innerHeight + "px";
        star.style.fontSize = (12 + Math.random() * 20) + "px";
        star.style.color = Math.random() > 0.5 ? "orange" : "white";
        star.style.animationDuration = (6 + Math.random() * 8) + "s";
        document.body.appendChild(star);
      }
    }
    function createBubbles(num) {
      for (let i = 0; i < num; i++) {
        const bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.style.left = Math.random() * window.innerWidth + "px";
        bubble.style.top = window.innerHeight + "px";
        const size = 20 + Math.random() * 50;
        bubble.style.width = bubble.style.height = size + "px";
        bubble.style.animationDuration = (8 + Math.random() * 12) + "s";
        document.body.appendChild(bubble);
      }
    }
    createStars(25);
    createBubbles(15);

    // „Éú„Çø„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßBGMÂÜçÁîü
    document.getElementById("diagnoseBtn").addEventListener("click", playBgm);
  </script>
</body>
</html>
