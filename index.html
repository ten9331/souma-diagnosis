<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãã†ã¾ãã‚“ã¨ã€‡ã€‡è¨ºæ–­</title>
  <style>
    body {
      font-family: "Yu Gothic", sans-serif;
      background: #fffacd; /* è–„é»„è‰² */
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    h1 { color: orange; font-size: 36px; margin-bottom: 30px; }
    input {
      padding: 12px; font-size: 18px;
      border-radius: 8px; border: 1px solid #ccc;
      position: relative; z-index: 2;
    }
    button {
      padding: 12px 24px; font-size: 18px;
      border: none; border-radius: 8px;
      background: orange; color: white;
      margin-top: 20px; cursor: pointer;
      z-index: 2; position: relative;
    }
    button:hover { background: darkorange; }
    #result {
      font-size: 28px; margin-top: 40px;
      opacity: 0; transition: opacity 1s ease-in;
      color: orange;
    }
    #fantasy {
      font-size: 20px; line-height: 1.8;
      max-width: 600px;
      margin: 20px auto;
      opacity: 0; transition: opacity 1s ease-in;
    }
    #serif {
      font-family: "Comic Sans MS", "Trebuchet MS", cursive;
      font-size: 22px;
      color: #ff69b4;
      margin-top: 20px;
      opacity: 0;
      transition: opacity 1s ease-in;
    }
    .show { opacity: 1 !important; }
    .heart {
      position: absolute; color: #ff80ab;
      font-size: 24px;
      animation: floatUp 4s linear forwards;
      z-index: 1;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-300px) scale(1.5); opacity: 0; }
    }

    /* æ˜Ÿ */
    .star {
      position: absolute;
      font-size: 18px;
      animation: floatStar 12s linear infinite;
      z-index: 0;
    }
    @keyframes floatStar {
      0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }

    /* ã‚·ãƒ£ãƒœãƒ³ç‰ */
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.7), rgba(255,255,255,0) 70%);
      border: 2px solid rgba(255,255,255,0.4);
      box-shadow: inset -5px -5px 15px rgba(173,216,230,0.5),
                  inset 5px 5px 15px rgba(255,182,193,0.4);
      animation: floatBubble 15s linear infinite;
      z-index: 0;
    }
    @keyframes floatBubble {
      0%   { transform: translateY(0) scale(1); opacity: 0.7; }
      50%  { opacity: 1; }
      100% { transform: translateY(-120vh) scale(1.3); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>ãã†ã¾ãã‚“ã¨ã€‡ã€‡è¨ºæ–­</h1>

  <input type="text" id="username" placeholder="åå‰ã‚’å…¥åŠ›ã—ã¦ã­">
  <br>
  <button onclick="diagnose()">è¨ºæ–­ã™ã‚‹ï¼</button>
  <button onclick="retry()" style="display:none;">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>

  <h2 id="result"></h2>
  <p id="fantasy"></p>
  <p id="serif"></p>

  <!-- ğŸ¼ BGM -->
  <audio id="bgm" loop>
    <source src="bgm.mp3" type="audio/mpeg">
  </audio>

  <script>
    const results = [
      { title: "ãã†ã¾ãã‚“ã¨ã‚²ãƒ¼ãƒ ã™ã‚‹ï¼", 
        text: "ä¸€ç·’ã«ç”»é¢ã‚’è¦‹ã¤ã‚ãªãŒã‚‰ã€ãµã¨æ‰‹ãŒè§¦ã‚Œã¦ãƒ‰ã‚­ãƒƒã€‚ç¬‘ã„åˆã†æ™‚é–“ãŒã€ã¾ã‚‹ã§ç‰¹åˆ¥ãªç§˜å¯†ã¿ãŸã„ã«æ„Ÿã˜ã‚‹ã€‚",
        serif: "ğŸ’›ã€Œå‹ã£ãŸã‚‰ã”è¤’ç¾ã€ã¡ã‚‡ã†ã ã„ï¼Ÿã€" },
      { title: "ãã†ã¾ãã‚“ã¨è‡ªè»¢è»Šã§é å‡ºï¼", 
        text: "é¢¨ã‚’åˆ‡ã£ã¦èµ°ã‚‹äºŒäººã®å½±ãŒä¸¦ã‚“ã§ä¼¸ã³ã‚‹ã€‚é’ç©ºã®ä¸‹ã§äº¤ã‚ã™ä¼šè©±ã«ã€ä½•æ°—ãªã„ã®ã«å¿ƒãŒå¼¾ã‚€ã€‚",
        serif: "ğŸ’›ã€Œç½®ã„ã¦ã‹ãªã„ã‹ã‚‰å®‰å¿ƒã—ã‚ã£ã¦ã€" },
      { title: "ãã†ã¾ãã‚“ã¨ã‚«ãƒ•ã‚§ã«è¡Œãï¼", 
        text: "ã‚«ãƒƒãƒ—ã‚’æŒã¤æŒ‡ãŒå°‘ã—é‡ãªã£ã¦ã€è¦–ç·šãŒåˆã£ãŸç¬é–“ã«èƒ¸ãŒé«˜é³´ã‚‹ã€‚ç”˜ã„é¦™ã‚Šã‚ˆã‚Šã‚‚å½¼ã®ç¬‘é¡”ã«é…”ã„ãã†ã€‚",
        serif: "ğŸ’›ã€Œãã®ä¸€å£ã€ä¿ºã«ã‚‚ãã‚Œãªã„ï¼Ÿã€" },
      { title: "ãã†ã¾ãã‚“ã¨æ”¾èª²å¾Œã®æ•™å®¤ï¼", 
        text: "å¤•é™½ãŒå·®ã—è¾¼ã‚€æ•™å®¤ã§ã€ä»–æ„›ã®ãªã„è©±ã«ç¬‘ã„åˆã†ã€‚æœºã«åºƒã’ãŸãƒãƒ¼ãƒˆã‚‚ã€ãªã‚“ã ã‹è¼ã„ã¦è¦‹ãˆã‚‹ã€‚",
        serif: "ğŸ’›ã€Œãšã£ã¨ã€ã“ã†ã—ã¦ãŸã„ãªã€" },
      { title: "ãã†ã¾ãã‚“ã¨æ˜ ç”»ã‚’è¦‹ã‚‹ï¼", 
        text: "æš—ã„é¤¨å†…ã§ã€éš£ã«ã„ã‚‹ã“ã¨ã‚’æ„è­˜ã—ã¦ã—ã¾ã†ã€‚å°ã•ãªå‹•ä½œã²ã¨ã¤ã²ã¨ã¤ã«å¿ƒè‡“ãŒè·³ã­ã‚‹ã€‚",
        serif: "ğŸ’›ã€Œâ€¦æ‰‹ã€ç¹‹ã”ã£ã‹ã€" },
      { title: "ãã†ã¾ãã‚“ã¨å›³æ›¸é¤¨ã§å‹‰å¼·ï¼", 
        text: "é™ã‹ãªç©ºé–“ã«äºŒäººã®å‘¼å¸ã ã‘ãŒéŸ¿ãã€‚æœºã®ä¸‹ã§è¶³ãŒè§¦ã‚Œã¦ã€è¦–ç·šã‚’é€¸ã‚‰ã™ã®ã«å¿…æ­»ã«ãªã‚‹ã€‚",
        serif: "ğŸ’›ã€Œé›†ä¸­ã§ãã¦ã‚‹ï¼Ÿä¿ºã®ã›ã„ã˜ã‚ƒãªã„ã‚ˆãªï¼Ÿã€" },
      { title: "ãã†ã¾ãã‚“ã¨å¤ç¥­ã‚Šï¼", 
        text: "æµ´è¡£å§¿ã«å°‘ã—ç…§ã‚ŒãªãŒã‚‰ã€å±‹å°ã‚’å·¡ã‚‹ã€‚å¤œç©ºã«èŠ±ç«ãŒä¸ŠãŒã£ã¦ã€äºŒäººã®ç¬‘é¡”ã‚‚å¼¾ã‘ã‚‹ã€‚",
        serif: "ğŸ’›ã€ŒèŠ±ç«ã‚ˆã‚Šã€å›ã®æ–¹ãŒç¶ºéº—ã ãªã€" },
      { title: "ãã†ã¾ãã‚“ã¨å¤œé“ã‚’æ­©ãï¼", 
        text: "è¡—ç¯ã®ä¸‹ã§è‚©ãŒå°‘ã—è§¦ã‚Œã‚‹ãŸã³ã«èƒ¸ãŒç†±ããªã‚‹ã€‚å¤œã®é™ã‘ã•ãŒã€æ°—æŒã¡ã‚’éš›ç«‹ãŸã›ã‚‹ã€‚",
        serif: "ğŸ’›ã€Œé€ã£ã¦ãã‚ˆã€‚å›ä¸€äººã ã¨å¿ƒé…ã ã‹ã‚‰ã€" }
    ];

    function generateIndex(max) {
      return Math.floor(Math.random() * max);
    }

    function diagnose() {
      const name = document.getElementById("username").value.trim();
      if (!name) return alert("åå‰ã‚’å…¥åŠ›ã—ã¦ã­ï¼");
      const r = results[generateIndex(results.length)];
      document.getElementById("result").innerText = `${name}ã•ã‚“ã®ä»Šæ—¥ã®è¨ºæ–­ã¯â€¦ ${r.title}`;
      document.getElementById("fantasy").innerText = r.text;
      document.getElementById("serif").innerText = r.serif;
      document.getElementById("result").classList.add("show");
      document.getElementById("fantasy").classList.add("show");
      document.getElementById("serif").classList.add("show");
      document.querySelector("button[onclick='retry()']").style.display = "inline-block";

      // ãƒãƒ¼ãƒˆæ¼”å‡º
      for (let i=0;i<15;i++){
        const heart = document.createElement("div");
        heart.className="heart"; heart.innerText="ğŸ’–";
        heart.style.left = Math.random()*window.innerWidth+"px";
        heart.style.top = (window.innerHeight-50)+"px";
        heart.style.fontSize = (20+Math.random()*20)+"px";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(), 4000);
      }

      // BGMå†ç”Ÿ
      const bgm = document.getElementById("bgm");
      bgm.volume = 0.6;
      bgm.play().catch(err => console.log("è‡ªå‹•å†ç”Ÿãƒ–ãƒ­ãƒƒã‚¯:", err));
    }

    function retry(){
      document.getElementById("result").classList.remove("show");
      document.getElementById("fantasy").classList.remove("show");
      document.getElementById("serif").classList.remove("show");
      setTimeout(diagnose, 100);
    }

    // ğŸŒŸ æ˜Ÿã¨ã‚·ãƒ£ãƒœãƒ³ç‰ã®ç”Ÿæˆ
    function createStars(num) {
      for (let i = 0; i < num; i++) {
        const star = document.createElement("div");
        star.className = "star";
        star.innerText = "â˜…";
        star.style.left = Math.random() * window.innerWidth + "px";
        star.style.top = window.innerHeight + "px";
        star.style.fontSize = (12 + Math.random() * 20) + "px";
        star.style.color = Math.random() > 0.5 ? "orange" : "white";
        star.style.animationDuration = (6 + Math.random() * 8) + "s";
        document.body.appendChild(star);
      }
    }
    function createBubbles(num) {
      for (let i = 0; i < num; i++) {
        const bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.style.left = Math.random() * window.innerWidth + "px";
        bubble.style.top = window.innerHeight + "px";
        const size = 20 + Math.random() * 50;
        bubble.style.width = bubble.style.height = size + "px";
        bubble.style.animationDuration = (8 + Math.random() * 12) + "s";
        document.body.appendChild(bubble);
      }
    }
    createStars(25);
    createBubbles(15);
  </script>
</body>
</html>
